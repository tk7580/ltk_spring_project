<!-- 2) Thymeleaf 템플릿: src/main/resources/templates/Member/mypage.html -->
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<head>
  <meta charset="UTF-8">
  <title>마이페이지</title>
  <link rel="stylesheet" th:href="@{/css/main.css}">
</head>
<body>
<!-- 기본 레이아웃 프래그먼트 포함 -->
<div th:replace="~{layout/default_layout :: header}"></div>

<div class="container mx-auto py-8">
  <h2 class="text-2xl font-semibold mb-6">마이페이지</h2>

  <section class="mb-8">
    <h3 class="text-xl mb-4">즐겨찾기</h3>
    <div class="grid grid-cols-4 gap-4">
      <div th:each="work : ${mypage.favorites}" class="card">
        <a th:href="@{/work/detail/{id}(id=${work.id})}" class="block">
          <div class="card-body">
            <h4 th:text="${work.title}" class="font-medium"></h4>
            <p th:text="${#strings.abbreviate(work.description, 100)}"></p>
            <span class="text-sm text-gray-500">평점: <span th:text="${work.averageScore}"></span></span>
          </div>
        </a>
      </div>
    </div>
  </section>

  <section>
    <h3 class="text-xl mb-4">시청 기록</h3>
    <div class="grid grid-cols-4 gap-4">
      <div th:each="work : ${mypage.watchHistory}" class="card">
        <a th:href="@{/work/detail/{id}(id=${work.id})}" class="block">
          <div class="card-body">
            <h4 th:text="${work.title}" class="font-medium"></h4>
            <p th:text="${#strings.abbreviate(work.description, 100)}"></p>
            <span class="text-sm text-gray-500">평점: <span th:text="${work.averageScore}"></span></span>
          </div>
        </a>
      </div>
    </div>
  </section>
</div>

<div th:replace="~{layout/default_layout :: footer}"></div>
</body>
</html>
